import { QrScanner } from "@yudiel/react-qr-scanner";
import ViewFinderImage from "./assets/VP.svg";

export default function Scanner() {
  return (
    <div
      style={{
        height: "100vh",
        maxHeight: "100vh",
        display: "flex",
        backgroundColor: "lightgray",
        overflow: "hidden",
      }}
    >
      <QrScanner
        viewFinder={ViewFinder}
        constraints={{
          facingMode: { ideal: "environment" },
          width: 343,
          height: 500,
        }}
        videoStyle={{
          objectFit: "cover",
        }}
        containerStyle={{
          aspectRatio: "343 / 500",
          maxHeight: "100%",
        }}
        onDecode={(result) => alert(result)}
        onError={(error) => console.log(error?.message)}
        tracker
      />
    </div>
  );
}

function ViewFinder() {
  return (
    <svg
      width="273"
      height="273"
      viewBox="0 0 273 273"
      style={{
        position: "absolute",
        zIndex: 10000,
        top: "50%",
        left: "50%",
        transform: "translate(-50%, -50%)",
      }}
      fill="red"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.5"
        d="M5.98242 85.7949C2.4668 85.7949 0.708984 83.9395 0.708984 80.2285V40.3848C0.708984 27.3965 4.0293 17.582 10.6699 10.9414C17.4082 4.30078 27.2227 0.980469 40.1133 0.980469H79.957C83.7656 0.980469 85.6699 2.78711 85.6699 6.40039C85.6699 9.91602 83.7656 11.6738 79.957 11.6738H40.5527C30.9824 11.6738 23.7559 14.1641 18.873 19.1445C13.9902 24.0273 11.5488 31.3027 11.5488 40.9707V80.2285C11.5488 83.9395 9.69336 85.7949 5.98242 85.7949ZM267.018 85.7949C263.404 85.7949 261.598 83.9395 261.598 80.2285V40.9707C261.598 31.3027 259.059 24.0273 253.98 19.1445C248.902 14.1641 241.725 11.6738 232.447 11.6738H193.043C189.234 11.6738 187.33 9.91602 187.33 6.40039C187.33 2.78711 189.234 0.980469 193.043 0.980469H232.887C245.875 0.980469 255.689 4.34961 262.33 11.0879C268.971 17.8262 272.291 27.5918 272.291 40.3848V80.2285C272.291 83.9395 270.533 85.7949 267.018 85.7949ZM40.1133 272.562C27.2227 272.562 17.4082 269.242 10.6699 262.602C4.0293 255.961 0.708984 246.195 0.708984 233.305V193.314C0.708984 189.701 2.4668 187.895 5.98242 187.895C9.69336 187.895 11.5488 189.701 11.5488 193.314V232.719C11.5488 242.289 13.9902 249.516 18.873 254.398C23.7559 259.379 30.9824 261.869 40.5527 261.869H79.957C83.7656 261.869 85.6699 263.676 85.6699 267.289C85.6699 270.805 83.7656 272.562 79.957 272.562H40.1133ZM193.043 272.562C189.234 272.562 187.33 270.805 187.33 267.289C187.33 263.676 189.234 261.869 193.043 261.869H232.447C241.725 261.869 248.902 259.379 253.98 254.398C259.059 249.516 261.598 242.289 261.598 232.719V193.314C261.598 189.701 263.404 187.895 267.018 187.895C270.533 187.895 272.291 189.701 272.291 193.314V233.305C272.291 246.098 268.971 255.814 262.33 262.455C255.689 269.193 245.875 272.562 232.887 272.562H193.043Z"
        fill="white"
      />
    </svg>
  );
}
